# What's new in Screen Time API
> [video](https://developer.apple.com/videos/play/wwdc2022/110336/)

## Talkshow
> 2023.05.24, 20:00 ~ 20:50 <br>
> 참여자: `다혜🐥`, `봄이💟`(음성이슈로 채팅으로 참여), `도연🍦`

<hr>

### Screen Time API?
`다혜🐥`: 오늘도 힘차게 WWDC 토크쇼 출발합니다~
* `다혜🐥`: 혹시 Screen Time API를 알고 계신 분 있나요?
* `도연🍦`: 처음 알았습니다.
* `봄이💟`: 저는 api를 알았다기 보다는 그냥 설정 앱에서 스크린타임 구경 많이 했어서 .. 그거랑 관련된걸줄 알았어여
* `다혜🐥`: Screen Time 앱에 대한 영상인 줄 알았는데, Screen Time API에서 새로워진 기능들이 주 내용이더라구요.

<hr>

### 영상의 난이도? 
* `다혜🐥`: 저는 Screen Time API 영상을 봤는데, 기존 iOS15 에서 어떤 기능을 하는지 몰랐어서 이해하는데 애를 많이 먹은 것 같아요.다른 분들은 영상 난이도는 어땠나요?
* `봄이💟`: 저도 공감합니다. 어려웠어요...
* `도연🍦`: 저는 그렇게 어렵지는 않았던 게 그냥 뭔가 소개 약간 다 이해해야 된다기보다는 '이런 것들이 있으니까 살펴봐라.' 그런 느낌이어서 자세히 안 보긴 했어요. 약간 그냥 대충 넘어가고 필요할 때 찾아봐야지.
* `다혜🐥`: 약간 그게 강했어. 맞아. 필요할 때 찾아볼 수 있을 정도의 소개로 진행이 되서 1회로 볼 때는 좀 귀에 안 들어왔거든요.무슨 내용인 거지? 그래서 1회로 볼때는 Screen Time API 가 주로 자녀의 앱 사용을 제한할 때 쓰는 앱들, 그런 앱에서 주로 쓰는 프레임워크다로 이제 이해를 하고 한 번 더 시청을 했어요. 그러니까 앱을 제한하는 방법, 제한하는 시간을 조정할 수 있고 뭐 이런 것들이 눈에 보이더라구요.
* `도연🍦`: 네네.
* `다혜🐥`: 그래서 봄이님은 영상이 조금 어려웠다 하셨고, 도연님은 소개에 가까워서 나중에 찾아볼 수 있을 정도의 지식을 축적하기엔 딱 좋았다고 느끼셨네요!
* `도연🍦`: 맞습니다.

* `다혜🐥`: 근데 확실한 건 좀 많이 낯설긴 했어요.이거 자체가 진짜 나온 지 얼마 안 된 기능이기도 해서.
* `도연🍦`: 네네.
* `다혜🐥`: 거의 21년에 나온 iOS 15면 지금 16을 쓰고 있는 입장에서 한 단계 차이밖에 안 나잖아요.요즘 앱들 보면 아직 대중적으로 쓰는 앱들은 15까지는 안 올라온 걸로 알고 있어요.그래도 많이는 따라 잡았다고 하는데,
* `도연🍦`: 음.
* `다혜🐥`: 근데 뭐 대중적인 앱들이 그런 거지 사실 이 기능을 타겟으로 한 앱을 만든다면 굳이 iOS 13, 14를 쓴 사람들까지 커버할 필요는 없겠죠.그러니까 어차피 이 기능을 사용하는 앱들은 기존 앱 보다는 새로운 앱일 경우가 많으니까 크게 상관이 없을 수도 있겠다~ 싶었어요.

<hr>

### 열품타와 Screen Time API의 관계에 대하여.
* `도연🍦`: 열품타에서도 그거 있잖아요. 열품타에서도 앱 제한할 수 있거든요.
* `다혜🐥`: 헉 그럼 Screen Time API를 쓰고 있을까요?
* `도연🍦`: 원래는 열품타 iOS앱에 없다가 어느 순간 생겼단 말이죠?
* `다혜🐥`: 없다가 생겼군요!
* `도연🍦`: 제가 열품타 그래도 몇 년, 엄청 오래 썼는데 제한 기능이 없었다가 이제 카테고리별로 앱도 제안할 수 있게 되었어요. 
원래 안드로이드 앱에서는 앱 제한 기능이 있었어요. 그래서 안드로이드는 처음부터 그렇게 돼 있었는데 ios는 없었어요.그래서 그냥 다른 앱 허용 모드가 있었거든요.
* `다혜🐥`: 한번 볼까요? 그러면 이 api를 썼을 가능성이 있겠네요.
* `도연🍦`: 그렇죠 굉장히 높은 것 같아요. Screen Time API가 처음 나왔을 때 이 이제 기능이 생긴 것 같아요.얼마 안 됐으니까.

(열품타 앱 확인 중)

* `다혜🐥`: 앱스토어에서 앱에 지원 범위를 볼 수가 있나요?
* `도연🍦`: 아마 최소 버전 나올거에요!맨 밑에 있어요.
* `다혜🐥`: 어 있다.

(최소 지원 버전 iOS 13 확인)

* `다혜🐥`: 지원 최소 지원은 iOS 13부터네요. 그럼 13을 쓰는 사람들은 이 기능을 못 쓰려나?
* `도연🍦`: 궁금하네요. 만약 Screen Time API를 사용하고 있다면 그렇지 않을까요? iOS15 부터 지원하겠네요.
* `다혜🐥`: 그럴 듯. 어떤 오늘의 추측으로는 열품타에서 스크린 api를 쓰는 것 같아.
* `도연🍦`: 예전 열품타 앱에서는 앱 제한 사용 기능이 없어서 아예 그냥 그냥 열려 있는 상태거나 열품타 앱을 나가면 시간 카운팅이 꺼지게 되어 있었어요.혹은 앱 허용 모드를 켜면 폰을 했다고 가정하고 랭킹에서 허용 앱으로 키고 공부한 시간은 제외됩니다.이제 그 앱 제한 기능이 생기면서 기능이 개선이 된 거죠.
* `다혜🐥`: 재밌다! 그러면 그 열품타에서 앱 제한 걸어두면 그 앱을 못 쓰는 거죠?
* `도연🍦`: 네네 못써요. 어떻게 나오는지 한번 보여드릴까요?

| 도연님이 보여주신 열품타 앱 제한 기능 실제 사용 화면 |
|:--:|
|<img src="https://github.com/Charming-Swift/WWDC-talkshow/assets/50159740/490a1582-6218-4108-a8a0-0f25187b7ad5" height=500>|

* `도연🍦`: 이렇게 나와요 아예 제한된 앱을 등록하고 열품타 타이머 켜면, 제한한 앱을 키자마자 이 화면이 나와요.
* `다혜🐥`: 진짜네. 우와... 그러면 이게 진짜 Screen Time API를 쓰는지 확인해볼까요? WWDC 영상에서 FamilyControl을 쓰면 Screen Time API 승인 여부를 이제 껐다 켰다 할 수 있다고 했잖아요.설정에 가서 확인해 줄 수 있을까요? 궁금해용.
* `도연🍦`: FamilyControl이 자녀 관련 기능이었나요?
* `다혜🐥`: Screen Time API를 쓰기 위해서 한 번 승인을 거쳐야 되는데 그 승인을 해주는 기능이 이 FamilyControl 프레임워크에서 할 수 있다고 이해를 했어요.
* `도연🍦`: 오 바로 설정에 들어가서 확인해보겠습니다.

| 설정에서 열품타의 Screen Time Access 확인 |
|:--:|
|<img src="https://github.com/Charming-Swift/WWDC-talkshow/assets/50159740/b20d1075-d58a-4158-9346-f6b51a2a605e" height=500>|


* `도연🍦`: 이렇게 뜨네요! 열품타에서 Screen Time API를 쓰는 게 맞았네요.
* `다혜🐥`: 진짜네.
* `다혜🐥`: 감사합니다. 그럼 이로써 열품타 iOS 앱은 최근에 나온 Screen Time API를 적용한 것이 확인이 됐네요. 신기하네.아니 이 API가 자녀 앱 막 이런 용도로 사용되길래 사용 사례를 바로 확인해 볼 수 있을까? 했는데 정말 가까운 곳에 예시가 있었어요.도연님 감사합니다!
* `도연🍦`: >_0
* `다혜🐥`: 근데 열품타 꾸준히 잘 쓰고 계신다니 좀 신기한데요.
* `도연🍦`: 거의 한 몸이죠.노션과 열풍 다 제 인생에 없어서는 안돼!
* `다혜🐥`: 진짜 노션 없어지면 안 돼요.제 모든 정보가 들어있어요. 진짜로 없어지면 안돼...
* `다혜🐥`: 생각보다 Screen Time API는 적용할 구석이 좀 많아 보이네요.원래는 다음 질문으로 이 API를 우리가 어떻게 써볼 수 있을지를 좀 고민해보려고 했어요.근데 도연님께서 좋은 사례를 들고와주셔서 다 같이 확인해볼 수 있었습니다 ㅎㅎ

<hr>

### 영상 내용에서 질문할 거리들
* `다혜🐥`: 그래서 영상 내용에 관한 얘기를 좀 더 나눠보도록 하겠습니다.WWDC 영상을 보면서 어려웠거나 이야기 나누고 싶은 것들이 있을까요?
* `도연🍦`: 저 있습니다!직접적인 API 내용에 관한 건 아닌데, 하나 조금 궁금했던 게 있어요.이거 조금 딴소리긴 한데 이거 보시면은 이 코드가 이제 권한 요청하는 코드잖아요.

| 도연님이 질문한 영상 속 코드 사진 |
|:--:|
|<img src="https://github.com/Charming-Swift/WWDC-talkshow/assets/50159740/9db39ebd-b710-4e26-bbb0-161c4de5b65e" height=500>|

* `다혜🐥`: 네엡.
* `도연🍦`: 근데 여기 Task를 써서 비동기 처리를 했더라고요.멀티 스레딩을 했는데, 이게 권한 관련 관련 작업들은 이렇게 명시적으로 해줘야 되는 건지 궁금했어요.
* `다혜🐥`: 음.. 제 생각을 말씀드리자면일단 표면적으로 `requestAuthorization` 메서드 자체가 비동기 함수로 선언되었으니까 Task로 비동기 처리를 해야한다고 봅니다.근데 이거는 1차적인 이유고 좀 더 깊게 들어가서 그러면 왜 이 메서드를 비동기로 만들었느냐를 생각해볼 수 있겠죠.영상에 나와 있지 않았지만 한번 추측은 해보자면, 제 생각엔 이게 앱 승인 요청을 할 때 그 알림창(alert)가 뜬다고 영상에 나와 있었어요.
* `도연🍦`: 네네.
* `다혜🐥`: 알림창(alert)가 뜨려면 어쨌든 UI를 건드려야 하겠죠? 그런 이유 때문에 비동기로 함수를 호출해서 화면이 바뀌도록 하지 않았을까요?
* `도연🍦`: 음~.
* `다혜🐥`: 그러니까 UI와 관련된 코드들은 그 우선순위가 크잖아요.만약에 저 메서드기 그냥 순차적으로 호출이 된다면, 승인을 확인하는 그 작업이 수행되는 동안 앱 화면이 멈춰 있지 않을까요?이런 이유로 인증 메서드를 비동기 함수로 만들었고 비동기적으로 호출해야 되지 않는가...라는 추측을 해봤습니다.
* `도연🍦`: 그렇군요!
* `다혜🐥`: 아니 정답이 아니라 제 생각이에요. 그냥. ㅎㅎ

* `도연🍦`: 네네 그럼요. 아니 이게 제가 헬스케어 쓰면서도 이거 인증하는 코드를 넣었는데 네 따로 이렇게 테스크로 감싸서 격리시키진 않았거든요.
* `다혜🐥`: 헬스킷에서도 이런 승인을 받는 메서드가 있나 보네요?
* `도연🍦`: 네. 이게 사용자 개인정보 관련 접근하는 API들은 다 저런 식으로 되어 있는 것 같더라고요.
* `다혜🐥`: 그러면 잠깐 살짝 저도 궁금하니까 이 `request authorization` 메서드 자체가 어떻게 선언되어 있는지 확인해볼게요.
* `도연🍦`: 좋아요!!

([공식문서](https://developer.apple.com/documentation/usernotifications/unusernotificationcenter/1649527-requestauthorization) 확인 중)

* `다혜🐥`: `request authorization`이라는 거 자체는 얘도 그렇고 똑같네요.`completionHandler`로 선언된 `request authorization`도 있고, `async` 구문에서 쓸 수 있도록 `async`로 선언된 것도 있고, 두 가지 버전이 다 있네요.
* `도연🍦`: 그렇군요. 이제 이해했어요! 제가 썼던 거는 completionHandler로 선언된 `request authorization` 이에요. 그래서 제가 쓴 메서드에서는 Task 처리가 필요 없었구나.
* `도연🍦`: 그래서 이렇게 처리했었거든요.async로 선언된 메서드를 썼다면 저도 저렇게 처리했겠네요.
* `다혜🐥`: 오호, 그러면 나중에 async로 바꿀 생각이 있으신가요?
* `도연🍦`: 저는 지금 네 어싱크를 배척하고 있어가지고 (ㅎㅎ)
* `다혜🐥`: 어째서죠..?!
* `도연🍦`: 저희 컴바인으로 통일한다고 배척 중입니다.
* `다혜🐥`: 컴바인과 어싱크는 또 어떤 차이점이 있는지 궁금하네요! 토크쇼 끝나고 한번 여쭤보겠습니다.
* `도연🍦`: 네네네 좋습니다.

* `다혜🐥`: 오늘 영상 내용에 대해 이야기하면서 `request authorization` 메서드에 대해서 알게 되었습니다.
* `도연🍦`: 네
* `다혜🐥`: 그 `request authorization`이 FamiltyControl 프레임워크에서만 있는 건 줄 알았는데 동일한 이름으로 Health kit 에서도 쓰고 있었습니다.이 메서드가 이름이 동일한게 아니라 그냥 똑같은 메서드로 쓰고 있나봐요.
* `도연🍦`: 네 그런가 봐요.
* `다혜🐥`: 인증을 요구하는 행위는 다 이런 이 메서드로 쓰나 봅니다.
* `도연🍦`: 네

<hr>

### 어떻게 적용해볼 수 있을까?
* `다혜🐥`: 좋습니다.. 이제 마지막 질문으로 가볼게요.어떻게 이 Screen Time API를 적용해볼 수 있을까요?
* `도연🍦`: 제가 생각한 게 하나 있는데,
* `다혜🐥`: 네.
* `도연🍦`: 이게 직접적으로 앱 사용 시간에 접근을 할 수 있는 거잖아요.그러니까 애널리틱스 할 때 되게 내부적으로 이제 사용자 유저 분석할 때 쓸 수 있지 않을까요?
* `다혜🐥`: 그렇죠 네 이거 내용이 뒷부분에 나왔던 것 같은데요
* `도연🍦`: 진짜요? 대충 봐가지고
* `다혜🐥`: 아무튼 방금 말씀하신 것처럼 Screen Time API로 사용량 같은 걸 측정할 수가 있고, 사용자가 어떤 앱을 많이 썼는지에 대한 데이터를 좀 뽑아볼 수 있을 것 같아요.활용할 수 있다면
* `도연🍦`: 네 기업 입장에서는 꿀 정보가 아닌지...
* `다혜🐥`: 근데 뭔가 완전히 많이는 안 될 거고 그냥 진짜 앱을 사용하는 거까지만 알 수 있을 것 같아요.
* `도연🍦`: 그 어떤 화면에 있었는지 그런 것까지는 추적이 안 되니까?
* `다혜🐥`: 자세한 건 그 각각 3개의 프레임워크에 대한 문서를 더 찾아봐야 될 것 같네요.앱을 몇 분 켜놨는지 정도는 알 수도 있겠네요.
* `도연🍦`: Screen Time 앱에 들어가서 확인해보시면 접속한 사이트도 다 떠요.
* `다혜🐥`: 맞아요. 이거 웹도 제한할 수 있다고 그랬어요.이 API가 그래서 영상에서 게이밍 관련된 웹사이트를 차단한다 하면 그것도 차단해서
* `봄이💟`: 네. 오늘 토크쇼 하기 전에 다혜님이랑 잠깐 회의를 했었는데, 때 잠깐 반디캠 사이트 들어갔다 나왔던게 44초로 찍혀 있네요.
* `다혜🐥`: 야무지네. 우리 내가 뭘 하는지 다 보고 있어.
* `도연🍦`: 와앙...
* `다혜🐥`: 이런 기능을 잘 사용하면 우리에게 큰 도움이 될 수 있지 않을까?사용자들끼리 같이 공유하는 서비스에서 뭔가 집중해야 되는 상황이나 이 앱을 쓰는 때만큼은 좀 제약을 걸어줘야 되는 기능이 필요하다면 Screen Time API를 사용할 것 같네요.
* `다혜🐥`: 영상 짧고 네 괜찮았습니다. 신기했어요.이번에 계속 WWDC 토크쇼에서 정한 주제들이 저희가 처음 보는 좀 새로운 주제들을 많이 적어서 신선한 게 많았어요.

<hr>

### 마무리.
* `다혜🐥`: 마지막으로 이 api에 대해서 마지막으로 하실 말씀들이 있을까요?
* `도연🍦`: 없어요~
* `봄이💟`: 없습니다!
* `다혜🐥`: 좋습니다. 오늘 생각보다 큰 수확을 얻었네요. 실제 이 API를 사용하고 있는 실제 사례(열품타)도 보면서 이해하기 더 수월 했습니다.메서드 관련해서도 좀 심도 있는 이야기를 해봤다! 정도로 오늘 토크쇼를 마무리 할 수 있을 것 같네요.이번 주 주제는 이렇게 마무리를 하겠습니다.
* `봄이💟`: 또 도연님 다음 주에 오세요.
* `다혜🐥`: 다음 주에도 오세요.
* `봄이💟`: 다음 주는 날씨 api, WeatherKit입니다.
* `다혜🐥`: 맞습니다. 다음주는 WWDC22의 [Meet WeatherKit](https://developer.apple.com/videos/play/wwdc2022/10003/)입니다! 
영상을 보기 전에 생각, 그리고 영상을 보면서 또 본인의 생각이나 궁금한 점을 기록해서 오시면 오늘 다음 주 수요일 이 시간에 이야기할 거리가 많아질 것 같습니다.오늘은 여기까지 하겠습니다!

* `봄이💟`: 네!!
* `도연🍦`: 수고했어요.
* `다혜🐥`: 수고하셨습니다. 다음 주에 뵙겠습니다.

<hr>

* `도연🍦`: 혹시 네 끝나고 잠깐 사담도 되나요?
* `다혜🐥`: 됩니다.

<hr>

## 개인 정리본
| 이름 | 링크, 블로그 |
|:---:|:--:|
| 이다혜 | [[WWDC22] iOS16에서 새로워진 Screen Time API를 알아보자. (What's new in Screen Time API)](https://dadahae0320.tistory.com/45) |
| - | - |
| - | - |


